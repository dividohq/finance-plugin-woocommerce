(()=>{"use strict";const e=window.React,t=window.wp.i18n,n=window.wc.wcBlocksRegistry,a=window.wp.htmlEntities,i=(0,window.wc.wcSettings.getSetting)("divido-finance_data",{}),o=(0,t.__)("Finance","woo-gutenberg-products-block"),d=(0,a.decodeEntities)(i.title)||o,s=(0,a.decodeEntities)(i.description||""),c=(0,a.decodeEntities)(i.footnote||""),l=i.plans?i.plans:"",r=({price:t})=>(0,e.createElement)("div",{id:"financeWidget","data-calculator-widget":!0,"data-mode":"calculator","data-amount":t,"data-plans":l,"data-footnote":c}),p=t=>{const{eventRegistration:n,emitResponse:a}=t,{onPaymentProcessing:i}=n;return(0,e.useEffect)((()=>{"undefined"!=typeof __widgetInstance&&__widgetInstance.init(),"undefined"!=typeof __calculator&&__calculator.init();const e=i((async()=>{if(document.getElementsByName("divido_plan").length<=0)return{type:a.responseTypes.ERROR,message:"Unable to receive the chosen finance plan"};const e=document.getElementsByName("divido_plan")[0].value,t=document.getElementsByName("divido_deposit").length>0?document.getElementsByName("divido_deposit")[0].value:0;return{type:a.responseTypes.SUCCESS,meta:{paymentMethodData:{divido_plan:e,divido_deposit:t}}}}));return()=>{e()}}),[a.responseTypes.ERROR,a.responseTypes.SUCCESS,i]),(0,e.createElement)("div",null,(0,e.createElement)("div",null,s),(0,e.createElement)(r,{price:t.billing.cartTotal.value}))},m={name:i.name,label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components;return(0,e.createElement)(n,{text:d})}),null),content:(0,e.createElement)(p,null),edit:(0,e.createElement)(p,null),canMakePayment:()=>i.active,ariaLabel:d,supports:{features:i.supports}};(0,n.registerPaymentMethod)(m)})();